<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>10.8 남아 있는 글자의 개수를 표시하기</title>
    <script src="../Scripts/jquery-1.4.2.js" type="text/javascript"></script>
    <script type="text/javascript">
        $('document').ready(function() {
            $('.remaining').each(function() {
                var $count = $('.count', this);
                var $input = $(this).prev();
                var maximumCount = $count.text() * 1;
                var update = function() {
                    var before = $count.text() * 1;
                    var now = maximumCount - $input.val().length;
                    
                    if (now < 0) {
                        var str = $input.val();
                        $input.val(str.substr(0, maximumCount));
                        now = 0;
                    }
                    
                    if (before != now) {
                        $count.text(now);
                    }
                };
                
                $input.bind('input keyup paste', function() { setTimeout(update, 0) });
                update();
            }); 
        });
    </script>
</head>
<body>
    <h1>10.8 남아 있는 글자의 개수를 표시하기</h1>
    <textarea></textarea>
    <div class="remaining">Characters remaining: <span class="count">300</span></div>
</body>
</html>
